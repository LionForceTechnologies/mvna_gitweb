(this["webpackJsonpwieldy-hook"]=this["webpackJsonpwieldy-hook"]||[]).push([[13],{578:function(e,t,a){"use strict";a.r(t);var n=a(125),c=a(24),i=a(0),r=a.n(i),l=a(10),o=a(541),s=a(147),u=a(117),d=a(72),m=a(540),b=a(581),f=a(70),O=(a(190),a(58)),g=a(172),j=a.n(g);t.default=function(e){var t=Object(l.e)((function(e){return e.crud.rolepermissionid})),a=Object(l.e)((function(e){return e.crud.rolepermission})),g=Object(l.e)((function(e){return e.crud.deletepermissionid})),p=Object(l.e)((function(e){return e.crud.getrole})),h=Object(l.e)((function(e){return e.crud.pagepermission})),y=Object(i.useState)(""),x=Object(c.a)(y,2),E=x[0],S=x[1],k=Object(i.useState)(""),v=Object(c.a)(k,2),C=(v[0],v[1],Object(i.useState)("")),w=Object(c.a)(C,2),_=(w[0],w[1],Object(i.useState)("")),F=Object(c.a)(_,2),B=(F[0],F[1],Object(i.useState)("")),I=Object(c.a)(B,2),A=(I[0],I[1],Object(i.useState)(0)),N=Object(c.a)(A,2),R=N[0],T=N[1],J=Object(i.useState)(0),q=Object(c.a)(J,2),D=q[0],K=q[1],L=Object(i.useState)(!1),V=Object(c.a)(L,2),P=V[0],z=V[1],G=Object(i.useState)(!1),H=Object(c.a)(G,2),M=H[0],Q=H[1],U=(Object(l.e)((function(e){return e.crud.getrole})),Object(l.d)()),W=o.a.useForm(),X=Object(c.a)(W,1)[0],Y=Object(i.useState)(!1),Z=Object(c.a)(Y,2),$=Z[0],ee=Z[1],te=Object(i.useState)(0),ae=Object(c.a)(te,2),ne=ae[0],ce=ae[1],ie=Object(i.useState)([]),re=Object(c.a)(ie,2),le=(re[0],re[1],Object(i.useState)("")),oe=Object(c.a)(le,2),se=(oe[0],oe[1],Object(i.useState)(0)),ue=Object(c.a)(se,2),de=(ue[0],ue[1],Object(i.useState)([])),me=Object(c.a)(de,2),be=me[0],fe=me[1],Oe=Object(i.useState)(""),ge=Object(c.a)(Oe,2),je=ge[0],pe=ge[1],he=Object(i.useState)(!1),ye=Object(c.a)(he,2),xe=ye[0],Ee=ye[1],Se=Object(i.useState)(0),ke=Object(c.a)(Se,2),ve=ke[0],Ce=ke[1],we=Object(i.useState)(!1),_e=Object(c.a)(we,2),Fe=_e[0],Be=_e[1],Ie=s.a.Option;function Ae(e){""!=t&&"no data found"!=t&&t.data.length>0&&U(Object(O.l)()),U(Object(O.x)(e.target.getAttribute("data-id"))),T(1)}function Ne(e){1==e.target.checked&&pe(e.target.getAttribute("data-id")),0==e.target.checked&&pe(e.target.getAttribute("data-id"))}function Re(e){Q(e.target.getAttribute("data-id")),z(!0)}Object(i.useEffect)((function(){0===D&&(U(Object(O.K)()),U(Object(O.J)()),U(Object(O.L)())),K(1)})),Object(i.useEffect)((function(){"success"==g&&0!=ne&&(ee(!0),U(Object(O.e)("")),ce(1))})),Object(i.useEffect)((function(){})),""!==t&&0!==R&&("no data found"!=t?(X.setFieldsValue({role:t.data[0].role}),S(t.data[0].role_id),fe(t.data[0].role_permission),Ce(0)):alert("there is no record"),Be(!0),T(0)),Object(i.useEffect)((function(){if(""!=t&&0===ve){fe([]);for(var e=function(e){document.getElementById(t.data[0].role_permission[e])&&(document.getElementById(t.data[0].role_permission[e]).checked=!0,fe((function(a){return[].concat(Object(n.a)(a),[t.data[0].role_permission[e]])})))},a=0;a<t.data[0].role_permission.length;a++)e(a);Ce(1)}})),Object(i.useEffect)((function(){if(""!==je&&(-1==be.indexOf(je)&&fe((function(e){return[].concat(Object(n.a)(e),[je])})),-1!=be.indexOf(je))){var e=[];be.filter((function(e){return e!=je})).map((function(t){return e.push(t),t})),fe(e)}}),[je]);var Te=[];h.length>0&&(Te=""!==t?h.map((function(e,t){return{page:e.menu,action:r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{display:"flex"}},r.a.createElement("input",{type:"checkbox",style:{marginRight:"7px",height:"15px"},onChange:Ne,id:e.id,"data-id":e.id}))),index:e.id,key:e.id}})):h.map((function(e,t){return{page:e.menu,action:r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{display:"flex"}},r.a.createElement("input",{type:"checkbox",style:{marginRight:"7px",height:"15px"},onChange:Ne,"data-id":e.id}))),index:e.id,key:e.id}})));var Je=[];a.length>0&&(Je=a.map((function(e,t){return{role:e.role,action:r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{display:"flex"}},r.a.createElement("i",{style:{marginRight:"7px",height:"15px"},onClick:Ae,"data-id":e.id,className:"icon icon-edit"}),r.a.createElement("i",{"data-id":e.id,onClick:Re,style:{height:"15px"},className:"icon icon-trash"}))),index:e.id,key:e.id}})));var qe=[];a.length>0&&(qe=a.map((function(e,t){return e.role_id}))),console.log("roles",qe);var De=[];return p.length>0&&(De=p.filter((function(e){return 1!=qe.includes("".concat(e.id))})).map((function(e,t){return r.a.createElement(Ie,{key:e.id,value:e.id},e.role)}))),r.a.createElement("div",null,r.a.createElement(o.a,{form:X,initialValues:{remember:!0},name:"usercreation",onFinish:function(e){""!=t?(0==be.length?Ee(!0):U(Object(O.ob)({role_id:E,role_permission:be,id:t.data[0].id})),Be(!1)):""==t&&(0==be.length?Ee(!0):U(Object(O.cb)({role_id:E,role_permission:be})),T(0));for(var a=document.getElementsByTagName("input"),n=0;n<a.length;n++)"checkbox"==a[n].getAttribute("type")&&(a[n].checked=!1);X.resetFields()},onFinishFailed:function(e){console.log("Failed:",e)},className:"gx-signin-form gx-form-row0"},r.a.createElement(u.a,null,r.a.createElement(d.a,{xl:12,lg:12,md:12,sm:24,xs:24},r.a.createElement(m.a,{title:"Roles capability"},r.a.createElement(o.a.Item,{rules:[{required:!0,message:"This field is required"}],name:"role"},r.a.createElement(s.a,{value:E,onChange:function(e){S(e)},placeholder:"Role",disabled:Fe},De)),r.a.createElement(b.a,{pagination:!1,className:"gx-table-responsive",columns:[{title:"Page",dataIndex:"page",key:"page"},{title:"Action",dataIndex:"action",key:"action"}],dataSource:Te}),r.a.createElement(d.a,{xl:4,lg:4,md:4,sm:24,xs:24},r.a.createElement(o.a.Item,null,r.a.createElement(f.a,{type:"primary",className:"gx-mb-0",htmlType:"submit"},"Submit"))))),r.a.createElement(d.a,{xl:12,lg:12,md:12,sm:24,xs:24},r.a.createElement(m.a,{title:"List Of Roles Capability"},r.a.createElement(b.a,{className:"gx-table-responsive",columns:[{title:"Role",dataIndex:"role",key:"role"},{title:"Action",dataIndex:"action",key:"action"}],dataSource:Je}))))),r.a.createElement(j.a,{show:P,custom:!0,showCancel:!0,confirmBtnText:"OK",cancelBtnText:"Cancel",confirmBtnBsStyle:"primary",cancelBtnBsStyle:"default",title:"Do you want to delete?",onConfirm:function(){z(!1),U(Object(O.s)({id:M,status:2})),ce(1)},onCancel:function(){z(!1)}}),r.a.createElement(j.a,{show:$,success:!0,title:"Deleted Successfully",onConfirm:function(){Q(""),ee(!1)}}),r.a.createElement(j.a,{show:xe,warning:!0,title:"Select any page for this role ",onConfirm:function(){Ee(!1)}}))}}}]);
//# sourceMappingURL=13.fbc1b04a.chunk.js.map