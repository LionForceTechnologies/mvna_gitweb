{"version":3,"sources":["routes/fileupload/index.js"],"names":["Fileupload","props","red_data","useSelector","crud","getfiles","roleid","editfiles","ifdeleted","deletedfile","useState","menu","setmenu","deleteid","setdeleteid","imageUrl","image","setimage","edit","setedit","setlink","deletes","setdeletes","deletestatus","setdeletestatus","nodeletestatus","setnodeletestatus","warningdelete","setwarningdelete","sub_menu_delete_custom","setsub_menu_delete_custom","setsubmenudeletes","custom","setcustom","stop","setstop","Form","useForm","form","dispatch","useDispatch","Select","Option","useEffect","getfile","setFieldsValue","data","name","link","docs","cleardeletefile","Edit","e","editfile","target","getAttribute","Delete","length","map","item","i","document","action","style","display","marginRight","height","onClick","data-id","id","className","index","key","initialValues","remember","onFinish","values","alert","putfile","icon","resetFields","img","undefined","updatefile","cleareditfile","getElementById","value","onFinishFailed","errorInfo","console","log","xl","lg","md","sm","xs","Item","rules","required","message","onChange","placeholder","type","file","files","accept","htmlType","title","columns","dataIndex","dataSource","show","showCancel","confirmBtnText","cancelBtnText","confirmBtnBsStyle","cancelBtnBsStyle","onConfirm","deletefile","status","onCancel","success","warning"],"mappings":"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","file":"static/js/7.94a6972a.chunk.js","sourcesContent":["import React, { useState, useEffect, useRef } from \"react\"\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Card, Divider, Table } from \"antd\";\r\nimport { Button, Checkbox, Form, Input, Select } from \"antd\";\r\nimport axios from 'axios';\r\nimport { putfile,getfile,editfile,cleareditfile,deletefile,cleardeletefile,updatefile } from \"../../appRedux/actions/Crud\";\r\nimport { Col, Row, } from \"antd\";\r\nimport SweetAlert from \"react-bootstrap-sweetalert\";\r\nimport {hostname} from \"../../hostname\";\r\n// import {Button, Card, Col, Row} from \"antd\";\r\nconst Fileupload = (props) => {\r\n  const red_data = useSelector(({ crud }) => crud.getfiles);\r\n  const roleid = useSelector(({ crud }) => crud.editfiles);\r\n  const ifdeleted = useSelector(({ crud }) => crud.deletedfile);\r\n  const [menu, setmenu] = useState('');\r\n  const [deleteid, setdeleteid] = useState('');\r\n  const [imageUrl, setimageUrl] = useState('');\r\n  const [image, setimage] = useState('');  \r\n  const [edit, setedit] = useState(0);\r\n  const [link, setlink] = useState('');\r\n  const [deletes, setdeletes] = useState(0);\r\n  const [deletestatus, setdeletestatus] = useState(false);\r\n  const [nodeletestatus, setnodeletestatus] = useState(false);\r\n  const [warningdelete, setwarningdelete] = useState(false);\r\n  const [parent, setparent] = useState('');\r\n  const [sub_edit, setsub_edit] = useState(0);\r\n  const [nth, setnth] = useState('');\r\n  const [sub_menu_delete_custom, setsub_menu_delete_custom] = useState(false);\r\n  const [operation, setoperation] = useState(0);\r\n  const [submenudeletes, setsubmenudeletes] = useState(0);\r\n  const [submenudeleteid, setsubmenudeleteid] = useState('');\r\n  const [dataManage, setdataManage] = useState([]);\r\n  const [index, setindex] = useState('');\r\n  const [custom, setcustom] = useState(false);\r\n  const [checkover, setcheckover] = useState(0);\r\n  const [stop, setstop] = useState(0);\r\n  const [form] = Form.useForm();\r\n  const [formsub] = Form.useForm();\r\n  const dispatch = useDispatch();\r\n  let ds = dataManage\r\n  const { Option } = Select;\r\n\r\n\r\n  useEffect(() => {\r\n    if (stop === 0) {\r\n      dispatch(getfile())\r\n    }\r\n    setstop(1)\r\n  })\r\n\r\n\r\n  useEffect(()=>{\r\n    if(roleid !== ''){\r\n      if(edit !== 0){\r\n        form.setFieldsValue({\r\n          menu: roleid.data[0].name\r\n        })\r\n        setlink(roleid.data[0].link)\r\n        setmenu(roleid.data[0].name)\r\n        setimage(roleid.data[0].docs)\r\n        // setimageUrl(`${hostname}/${roleid.data[0].icon}`)\r\n        setedit(0)\r\n      }\r\n    }\r\n  })\r\n\r\n  useEffect(()=>{\r\n    if(ifdeleted == 'success' ){\r\n      if(deletes != 0){\r\n        setdeletestatus(true)\r\n        dispatch(cleardeletefile(''))\r\n        setdeletes(1)\r\n      }\r\n    }\r\n  })\r\n\r\n\r\n  const onFinishFailed = errorInfo => {\r\n    console.log('Failed:', errorInfo);\r\n  };\r\n  const onFinish = values => {\r\n    if(roleid == ''){\r\n      if(image == ''){\r\n        alert('fill all fields')\r\n        return;\r\n      }\r\n        dispatch(putfile({\r\n            name : menu,\r\n            icon : image\r\n        }))\r\n        form.resetFields();\r\n        }\r\n        else if(roleid != ''){\r\n          let img =  image\r\n          if(image == '' || image == null || image == undefined || image == 'undefined'){\r\n            img = imageUrl\r\n          }\r\n            dispatch(updatefile(\r\n              {\r\n                \"name\": menu,\r\n                icon : img,\r\n                'id': roleid.data[0].id\r\n              }\r\n            ))\r\n          setedit(0);\r\n          dispatch(cleareditfile(''))\r\n          form.resetFields();\r\n          }\r\n\r\n          form.resetFields();\r\n          document.getElementById('fileimage').value = '';\r\nimageUrl('')\r\n\r\n  };\r\n\r\n\r\n  const columns = [\r\n    {\r\n      title: 'Name',\r\n      dataIndex: 'name',\r\n      key: 'name',\r\n    },\r\n    {\r\n      title: 'Document',\r\n      dataIndex: 'document',\r\n      key: 'document',\r\n    },\r\n    {\r\n      title: 'Action',\r\n      dataIndex: 'action',\r\n      key: 'action',\r\n    }\r\n  ];\r\n\r\n  function Edit(e) {\r\n    dispatch(editfile(e.target.getAttribute('data-id')))\r\n    setedit(1)\r\n  }\r\n  function Delete(e) {\r\n    setdeleteid(e.target.getAttribute('data-id'))\r\nsetcustom(true)\r\n  }\r\n\r\n  // ******sweet alert****\r\n  function confirmwarningdelete() {\r\n    setwarningdelete(false);\r\n    // setcustom(true);\r\n  }\r\n  function deleteconfirm() {\r\n    setcustom(false)\r\n    dispatch(deletefile({id : deleteid , status : 2}))\r\n    setdeletes(1)\r\n  }\r\n  function deletecancel() {\r\n    setcustom(false)\r\n  }\r\n  function deletesuccess() {\r\n    setdeletestatus(false)\r\n  }\r\n  function deletewarning() {\r\n    setnodeletestatus(false)\r\n  }\r\n  function submenudeletecancel() {\r\n    setsub_menu_delete_custom(false)\r\n  }\r\n  function submenudeleteconfirm() {\r\n    // dispatch(submenudelete({ id: submenudeleteid, status: 2 }))\r\n    setsubmenudeletes(1)\r\n    setsub_menu_delete_custom(false)\r\n  }\r\n  // ******sweet alert**** \r\n  function uploadimage(e){\r\n    let file = e.target.files[0];\r\n    setimage(file)\r\n    // let reader = new FileReader();\r\n    // let url = reader.readAsDataURL(file);\r\n    // reader.onloadend = function (e) {\r\n    //     setimageUrl(reader.result)\r\n    //   }.bind(this);\r\n}\r\n  let data = [];\r\n  if (red_data.length > 0) {\r\n    data = red_data.map((item, i) => {\r\n      return {\r\n        name: item.name,\r\n        document: item.docs,\r\n        action: (<><div style={{ display: 'flex' }}><i style={{ marginRight: '7px', height: '15px' }} onClick={Edit} data-id={item.id} className=\"icon icon-edit\" /><i data-id={item.id} onClick={Delete} style={{ height: '15px' }} className=\"icon icon-trash\" /></div></>),\r\n        index: item.id,\r\n        key: item.id\r\n      }\r\n    });\r\n  }\r\n  return (\r\n    <div>\r\n      <Form\r\n        form={form}\r\n        initialValues={{ remember: true }}\r\n        name=\"basic\"\r\n        onFinish={onFinish}\r\n        onFinishFailed={onFinishFailed}\r\n        className=\"gx-signin-form gx-form-row0\">\r\n        <Row>\r\n          <Col xl={8} lg={8} md={8} sm={24} xs={24}>\r\n            <Form.Item\r\n              rules={[{ required: true, message: 'name is required' }]} name=\"menu\">\r\n              <Input value={menu} onChange={(e) => {\r\n                setmenu(e.target.value)\r\n                console.log(red_data)\r\n              }} placeholder=\"Name\" />\r\n            </Form.Item>\r\n          </Col>\r\n\r\n          <Col xl={8} lg={8} md={8} sm={24} xs={24}>\r\n              <input id='fileimage' type='file'  onChange={ uploadimage }  accept=\".doc,.docx,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document\" />\r\n          </Col>\r\n          <Col xl={8} lg={8} md={8} sm={24} xs={24}>\r\n            <Form.Item>\r\n              <Button type=\"primary\" className=\"gx-mb-0\" htmlType=\"submit\">\r\n                Submit\r\n              </Button>\r\n            </Form.Item>\r\n          </Col>\r\n        </Row>\r\n        <Card title=\"Menu Table\">\r\n          <Table className=\"gx-table-responsive\" columns={columns} dataSource={data} />\r\n        </Card>\r\n      </Form>\r\n     \r\n      <div className={`sweetalerts`}>\r\n        <SweetAlert show={custom}\r\n          custom\r\n          showCancel\r\n          confirmBtnText={`OK`}\r\n          cancelBtnText={`Cancel`}\r\n          confirmBtnBsStyle=\"primary\"\r\n          cancelBtnBsStyle=\"default\"\r\n          // customIcon={\"https://via.placeholder.com/500X330\"}\r\n          title={`Do you want to delete?`}\r\n          onConfirm={deleteconfirm}\r\n          onCancel={deletecancel}\r\n        >\r\n          {/* <IntlMessages id=\"sweetAlerts.youWillFind\"/> */}\r\n        </SweetAlert>\r\n        <SweetAlert show={deletestatus} success title={`Deleted Successfully`}\r\n          onConfirm={deletesuccess}>\r\n          {/* <IntlMessages id=\"sweetAlerts.btnClicked\"/> */}\r\n        </SweetAlert>\r\n        <SweetAlert show={nodeletestatus} warning title={`Failure`}\r\n          onConfirm={deletewarning}>\r\n          {/* <IntlMessages id=\"sweetAlerts.btnClicked\"/> */}\r\n        </SweetAlert>\r\n        <SweetAlert show={warningdelete} warning title={`This menu have submenus`}\r\n          onConfirm={confirmwarningdelete}>\r\n          {/* <IntlMessages id=\"sweetAlerts.btnClicked\"/> */}\r\n        </SweetAlert>\r\n        <SweetAlert show={sub_menu_delete_custom}\r\n          custom\r\n          showCancel\r\n          confirmBtnText={`OK`}\r\n          cancelBtnText={`Cancel`}\r\n          confirmBtnBsStyle=\"primary\"\r\n          cancelBtnBsStyle=\"default\"\r\n          // customIcon={\"https://via.placeholder.com/500X330\"}\r\n          title={`Do you want to delete?`}\r\n          onConfirm={submenudeleteconfirm}\r\n          onCancel={submenudeletecancel}\r\n        >\r\n          {/* <IntlMessages id=\"sweetAlerts.youWillFind\"/> */}\r\n        </SweetAlert>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Fileupload;\r\n"],"sourceRoot":""}